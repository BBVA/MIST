<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>MIST</title>
<meta name="description" content="Create complex tools execution Workflows for working together">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="MIST">
<meta property="og:title" content="MIST">
<meta property="og:url" content="http://0.0.0.0:4000/mist/functions.html">


  <meta property="og:description" content="Create complex tools execution Workflows for working together">












<link rel="canonical" href="http://0.0.0.0:4000/mist/functions.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "http://0.0.0.0:4000/mist/"
    
  }
</script>






<!-- end _includes/seo.html -->



  <link href="/mist/feed.xml" type="application/atom+xml" rel="alternate" title="MIST Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/mist/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/mist/"><img src="/mist/content/assets/images/logo-yellow-250x250.png" alt=""></a>
        
        <a class="site-title" href="/mist/">
          MIST
          <span class="site-subtitle">Create complex tools execution Workflows for working together</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/mist/">Home</a>
            </li><li class="masthead__menu-item">
              <a href="/mist/documentation.html#QuickStart">Quick-Start</a>
            </li><li class="masthead__menu-item">
              <a href="/mist/documentation.html">Documentation</a>
            </li><li class="masthead__menu-item">
              <a href="/mist/syntax.html">Mist Language</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <a href="/mist/"><span class="nav__sub-title">Home</span></a>
        

        
      </li>
    
      <li>
        
          <a href="/mist/documentation.html"><span class="nav__sub-title">Documentation</span></a>
        

        
        <ul>
          
            <li><a href="/mist/documentation.html#Introduction">Introduction</a></li>
          
            <li><a href="/mist/documentation.html#QuickStart">Quick Start</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Mist Language</span>
        

        
        <ul>
          
            <li><a href="/mist/syntax.html">Syntax</a></li>
          
            <li><a href="/mist/functions.html">Functions</a></li>
          
            <li><a href="/mist/catalog.html">Catalog</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <h1 id="builtin-commands">Builtin commands</h1>

<p><code class="language-plaintext highlighter-rouge">MIST</code> comes with a handful of builtin commands for the most basic tasks. This
set can be increased by the use of external repositories. Here follow the list
of builtin commands:</p>

<!---
commandName: data
link: builtin_data.html
order: 1
--->
<p><a id="data"></a></p>
<h2 id="data-command"><strong>data</strong> command</h2>

<h3 id="description">Description</h3>

<p>This command define a knowledge base structure that can be populated later.
You can access to the component of the structure by using “.” symbol
Every structure can store several instances.
They can be considered a stack and it can be iterated with the command “iterate”.
When you have put more than one instances in a structure, you have direct access to the last instance inserted.</p>

<h3 id="syntax">Syntax</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  data mydata {
    key1
    key2
    ...
  }
</code></pre></div></div>

<h3 id="parameters">Parameters</h3>

<ul>
  <li>myDaya: an identifier for the structure</li>
  <li>keyN: an identifier for a component inside the structure</li>
</ul>

<h3 id="examples">Examples</h3>

<p>This example define the structure myHosys, put 3 instances and then print it.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  data myHosts {
    ip
    so
  }

  put "127.0.0.1" "linux" =&gt; myHosts
  put "windows" "192.168.1.23" =&gt; myHosts(so ip)
  put "8.8.8.8" "unknown" =&gt; myHosts

  # This print all the instaces inserted
  print myHosts

  # This print 8.8.8.8
  print myHosts.ip
</code></pre></div></div>

<!---
commandName: put
link: builtin_put.html
order: 2
--->
<p><a id="put"></a></p>
<h2 id="put-command"><strong>put</strong> command</h2>

<h3 id="description-1">Description</h3>

<p>This command put data to the knowledge base.
The number of parameter must match with the data structure fields</p>

<h3 id="syntax-1">Syntax</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  put IDorString [IDorString] [IDorString] ... =&gt; targetId
  put IDorString [IDorString] [IDorString] ... =&gt; targetId(field1 field2 field3...)
</code></pre></div></div>

<h3 id="parameters-1">Parameters</h3>

<ul>
  <li>IdorString: An string or an id with the name of the source local variable.</li>
  <li>targetId: data structure id of the knowledge base</li>
  <li>fieldX: optionally, you can chose the order of the fields to put</li>
</ul>

<h3 id="examples-1">Examples</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  data myHosts {
    ip
    so
  }

  put "127.0.0.1" "linux" =&gt; myHosts
  put "windows" "192.168.1.23" =&gt; myHosts(so ip)
  put "8.8.8.8" "unknown" =&gt; myHosts

  data myIps {
    ip
  }

  iterate myHosts =&gt; host {
    put host.ip =&gt; MyIps
  }
</code></pre></div></div>

<!---
commandName: print
link: builtin_print.html
order: 3
--->
<p><a id="print"></a></p>
<h2 id="print-command"><strong>print</strong> command</h2>

<h3 id="description-2">Description</h3>

<p>This command write an string, a local variable or a data structure of the knowledge base on console</p>

<h3 id="syntax-2">Syntax</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  print IDorString
</code></pre></div></div>

<h3 id="parameters-2">Parameters</h3>

<ul>
  <li>IdorString: An string or an id with the name of the source local variable or data structure.</li>
</ul>

<h3 id="examples-2">Examples</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  print "Program init"

  data myHosts {
    ip
    so
  }

  put "127.0.0.1" "linux" =&gt; myHosts
  put "192.168.1.23" "windows" =&gt; myHosts
  put "8.8.8.8" "unknown" =&gt; myHosts

  print myHosts

  iterate myHosts =&gt; host {
    print host.ip
  }
</code></pre></div></div>

<!---
commandName: check
link: builtin_check.html
order: 4
--->
<p><a id="check"></a></p>
<h2 id="check-command"><strong>check</strong> command</h2>

<h3 id="description-3">Description</h3>

<p>This command check the value of a variable and execute commands if match.</p>

<h3 id="syntax-3">Syntax</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  check id is value {
    ...
  }
</code></pre></div></div>

<h3 id="parameters-3">Parameters</h3>

<ul>
  <li>id: an identifier to match with value</li>
  <li>value: an identifier or string to match with id</li>
</ul>

<h3 id="examples-3">Examples</h3>

<p>This example define the structure myHosys, put 1 instance, check the ip value and then print some log.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  data myHosts {
    ip
    so
  }

  put "127.0.0.1" "linux" =&gt; myHosts

  check myHosts.ip "127.0.0.1" {
    print "My IP is the same!"
  }
</code></pre></div></div>

<!---
commandName: iterate
link: builtin_iterate.html
order: 5
--->
<p><a id="iterate"></a></p>
<h2 id="iterate-command"><strong>iterate</strong> command</h2>

<h3 id="description-4">Description</h3>

<p>This command iterate over a data list</p>

<h3 id="syntax-4">Syntax</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  iterate myList =&gt; item {
    ...
  }
</code></pre></div></div>

<h3 id="parameters-4">Parameters</h3>

<ul>
  <li>myList: An id with the name of the source list: local variable or knowledge base id.</li>
  <li>item: the name of the local variable to map every item</li>
</ul>

<h3 id="examples-4">Examples</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  data myHosts {
    ip
    so
  }

  put "127.0.0.1" "linux" =&gt; myHosts
  put "windows" "192.168.1.23" =&gt; myHosts(so ip)
  put "8.8.8.8" "unknown" =&gt; myHosts

  iterate myHosts =&gt; host {
    print host.ip
  }
</code></pre></div></div>

<!---
commandName: exec
link: builtin_exec.html
order: 6
--->
<p><a id="exec"></a></p>
<h2 id="exec-command"><em>exec</em> command</h2>

<h3 id="description-5">Description</h3>

<p>This command executes a custom user shell command</p>

<h3 id="syntax-5">Syntax</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  exec myCustomCommand {
    input {
      param1 = param1value
      ...
    }
    output {
      result
      resultCode
      consoleOutput
      consoleError
    }
    then {
      ...
    }
  }
</code></pre></div></div>

<h3 id="input-parameters">Input parameters</h3>

<ul>
  <li>myCustomCommand: An string with the shell command I want to execute. You can parametrize it using {} place holders</li>
  <li>paramN: The value of the parameters used in the command</li>
</ul>

<h3 id="output-parameters">Output parameters</h3>

<ul>
  <li>result: a string with values “Success” or “Error”. Depending if the command could be executed successfully</li>
  <li>resultCode: the exit code provided after command execution</li>
  <li>consoleOutput: raw text with console standard output of the command.</li>
  <li>consoleError: raw text with console standard error of the command.</li>
</ul>

<h3 id="examples-5">Examples</h3>

<p>List all files with “txt” extension</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  exec "bash -c ls -1 {filter}" {
    input {
      filter = "*.txt"
    }
    output {
      result
      resultCode
      consoleOutput
      consoleError
    }
    then {
      print resultCode
    }
  }
</code></pre></div></div>

<!---
commandName: searchInText
link: builtin_searchInText.html
order: 7
--->
<p><a id="searchInText"></a></p>
<h2 id="searchintext-command"><em>searchInText</em> command</h2>

<h3 id="description-6">Description</h3>

<p>Search some regex in a text</p>

<h3 id="syntax-6">Syntax</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  searchInText regex text {
    output {
      result
      found
    }
    then {
      ...
    }
  }
</code></pre></div></div>

<h3 id="input-parameters-1">Input parameters</h3>

<ul>
  <li>regex: a Python3 regex expression</li>
  <li>text: a variable that contains the text to look into.</li>
</ul>

<h3 id="output-parameters-1">Output parameters</h3>

<ul>
  <li>result: a string with values “Success” or “Error”. Depending if the command could be executed successfully</li>
  <li>found: “True” if regex was found. “False” otherwise</li>
</ul>

<h3 id="examples-6">Examples</h3>

<p>Find a name in a phrase.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  data myData {
    text
  }
  put "Hello, my name is Peter and I like Mist!" =&gt; myData
  searchInText "Peter" myData.text {
    output {
      result
      found
    }
    then {
      check found is True {
        print "Peter found"
      }
    }
  }
</code></pre></div></div>

<!---
commandName: searchInXML
link: builtin_searchInXML.html
order: 8
--->
<p><a id="searchInXML"></a></p>
<h2 id="searchinxml-command"><em>searchInXML</em> command</h2>

<h3 id="description-7">Description</h3>

<p>Search some xpath node in an XML string</p>

<h2 id="syntax-7">Syntax</h2>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  searchInXML xpath text {
    output {
      result
      found
      value
    }
    then {
      ...
    }
  }
</code></pre></div></div>

<h3 id="input-parameters-2">Input parameters</h3>

<ul>
  <li>xpath: an XML xpath to search</li>
  <li>text: a variable that contains the XML text to look into.</li>
</ul>

<h3 id="output-parameters-2">Output parameters</h3>

<ul>
  <li>result: a string with values “Success” or “Error”. Depending if the command could be executed successfully</li>
  <li>found: “True” if xpath was found. “False” otherwise</li>
  <li>value: If found, it contains the value of the xpath node. “None” otherwise</li>
</ul>

<h3 id="examples-7">Examples</h3>

<p>Find an item title in a xml document.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  data myData {
    XMLtext
  }

  put '''&lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;bookstore&gt;
    &lt;book category="cooking"&gt;
      &lt;title lang="en"&gt;Everyday Italian&lt;/title&gt;
      &lt;author&gt;Giada De Laurentiis&lt;/author&gt;
      &lt;year&gt;2005&lt;/year&gt;
      &lt;price&gt;30.00&lt;/price&gt;
    &lt;/book&gt;
    &lt;book category="children"&gt;
      &lt;title lang="en"&gt;Harry Potter&lt;/title&gt;
      &lt;author&gt;J K. Rowling&lt;/author&gt;
      &lt;year&gt;2005&lt;/year&gt;
      &lt;price&gt;29.99&lt;/price&gt;
    &lt;/book&gt;
  &lt;/bookstore&gt;
  ''' =&gt; myData

  searchInXML "./book[2]/title" myData.XMLtext {
    output {
      r    esult
      found
      value
    }
    then {
      print result
      print found
      print value
    }
  }
</code></pre></div></div>

<!---
commandName: searchInJSON
link: builtin_searchInJSON.html
order: 9
--->
<p><a id="searchInJSON"></a></p>
<h2 id="searchinjson-command"><em>searchInJSON</em> command</h2>

<h3 id="description-8">Description</h3>

<p>Search some jsonpath node in an JSON string</p>

<h3 id="syntax-8">Syntax</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  searchInJSON jsonpath text {
    output {
      result
      found
      value
    }
    then {
      ...
    }
  }
</code></pre></div></div>

<h3 id="input-parameters-3">Input parameters</h3>

<ul>
  <li>jsonpath: a JSON path to search</li>
  <li>text: a variable that contains the JSON text to look into.</li>
</ul>

<h3 id="output-parameters-3">Output parameters</h3>

<ul>
  <li>result: a string with values “Success” or “Error”. Depending if the command could be executed successfully</li>
  <li>found: “True” if then jsonpath was found. “False” otherwise</li>
  <li>value: If found, it contains the value of the jsonpath node. “None” otherwise</li>
</ul>

<h3 id="examples-8">Examples</h3>

<p>Find an item name in a json document.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  data myData {
    JSONtext
  }

  put '''
  {
  "employees": [
    {
      "id": 1,
      "name": "Pankaj",
      "salary": "10000"
    },
    {
      "name": "David",
      "salary": "5000",
      "id": 2
    }
  ]
  }
  ''' =&gt; myData

  searchInJSON "employees[1].name" myData.JSONtext {
    output {
      result
      found
      value
    }
    then {
      print result
      print found
      print value
    }
  }
</code></pre></div></div>

<!---
commandName: csvDump
link: builtin_csvDump.html
order: 10
--->
<p><a id="csvDump"></a></p>
<h2 id="csvdump-command"><em>CSVdump</em> command</h2>

<h3 id="description-9">Description</h3>

<p>This command write a data structure of the knowledge base into a CSV file</p>

<h3 id="syntax-9">Syntax</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  CSVdump data =&gt; "targetFile.csv"
</code></pre></div></div>

<h3 id="parameters-5">Parameters</h3>

<ul>
  <li>data: An id with the name of the source data structure in the knowledge base</li>
  <li>“targetFile.csv”: An string with the path and name of the target CSV file</li>
</ul>

<h3 id="examples-9">Examples</h3>

<p>Define a data structure, fill it with some content, and dump it to a CSV file.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  data myHosts {
    ip
    so
  }

  put "127.0.0.1" "linux" =&gt; myHosts
  put "192.168.1.23" "windows" =&gt; myHosts
  put "8.8.8.8" "unknown" =&gt; myHosts

  CSVdump myHosts =&gt; "myHosts.csv"
</code></pre></div></div>

<!---
commandName: csvPut
link: builtin_csvPut.html
order: 11
--->
<p><a id="csvPut"></a></p>
<h2 id="csvput-command"><em>CSVput</em> command</h2>

<h3 id="description-10">Description</h3>

<p>This command reads a CSV file and put all the data into the knowledge base</p>

<h3 id="syntax-10">Syntax</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  CSVput "sourceFile.csv" =&gt; target
</code></pre></div></div>

<h3 id="parameters-6">Parameters</h3>

<ul>
  <li>“sourceFile.csv”: An string with the path and name of the source CSV file
(CSV header is mandatory, and delimiter must be a comma)</li>
  <li>target: An id with the target name in the knowledge base</li>
</ul>

<h2 id="examples-10">Examples</h2>

<p>Read a csvFile</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">IP</th>
      <th style="text-align: left">SO</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">127.0.0.1</td>
      <td style="text-align: left">linux</td>
    </tr>
    <tr>
      <td style="text-align: left">192.168.1.23</td>
      <td style="text-align: left">windows</td>
    </tr>
    <tr>
      <td style="text-align: left">8.8.8.8</td>
      <td style="text-align: left">unknown</td>
    </tr>
  </tbody>
</table>

<p>and iterate over it printing some of its content.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  CSVput "examples/nmap/myhosts.csv" =&gt; myHosts

  iterate myHosts =&gt; host {
    print host.ip
  }
</code></pre></div></div>


        
      </section>

      <footer class="page__meta">
        
        


        

      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/BBVA/mist" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/mist/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 MIST. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/mist/assets/js/main.min.js"></script>










  </body>
</html>
